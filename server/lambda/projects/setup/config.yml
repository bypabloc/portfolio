# Portfolio Serverless System - Projects Lambda Configuration
# Unified configuration file for Lambda function and API Gateway

lambda_function:
  name: projects
  description: "Portfolio projects management Lambda function"
  language: python
  runtime: python3.13
  handler: src.lambda_function.lambda_handler
  package_file: requirements.txt
  package_type: zip
  service_name: projects
  timeout: 30
  memory_size: 512

  # Shared modules this lambda uses
  shared_modules:
    - database
    - models
    - repositories  # Changed from 'repository' to 'repositories'
    - config
    - utils
    - exceptions

api_gateway:
  path: "/projects"
  cors_enabled: true
  methods:
    - GET
    - POST
    - PUT
    - PATCH
    - DELETE

  # Sub-resources for enhanced API structure
  sub_resources:
    - path: "featured"
      description: "Featured projects endpoint"
      methods:
        - GET

    - path: "by-status"
      description: "Projects filtered by service status"
      methods:
        - GET

    - path: "technologies"
      description: "Projects grouped by technology"
      methods:
        - GET

  # CORS configuration
  cors:
    allow_origins:
      - "*"
    allow_methods:
      - "GET"
      - "POST"
      - "PUT"
      - "PATCH"
      - "DELETE"
      - "OPTIONS"
    allow_headers:
      - "Content-Type"
      - "X-Amz-Date"
      - "Authorization"
      - "X-Api-Key"
      - "X-Amz-Security-Token"
      - "X-Correlation-ID"
    max_age: 3600

# Shared modules deployment configuration
deployment:
  strategy: copy
  target_dir: shared
  preserve_structure: true
  include_compiled: false
  exclude_patterns:
    - "*.md"
    - "*.txt"
    - "test_*"
    - "*_test.py"

# Environment variables configuration
environment:
  required:
    - DATABASE_URL
    - ENVIRONMENT
  optional:
    - LOG_LEVEL
    - DEBUG_MODE

# Health check configuration
health_check:
  enabled: true
  endpoint: /health
  dependencies:
    - database
    - shared_modules

# Monitoring configuration
monitoring:
  cloudwatch_logs: true
  metrics_enabled: true
  xray_tracing: true
