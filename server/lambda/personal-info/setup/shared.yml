# Shared modules configuration for personal-info Lambda function
# This file specifies which modules from server/shared/ should be included
# when deploying this Lambda function

name: personal-info
description: Personal information management Lambda function

# Shared modules to include (granular selection)
shared:
  # Database connection and session management
  database:
    - connection.py     # DatabaseManager, get_async_session
    - base.py          # BaseTable, BaseSchema, TimestampMixin
    - mixins.py        # MetadataMixin, StatusMixin

  # Models and schemas
  models:
    - base.py          # HealthResponse, APIResponse, ContactInfo
    - common.py        # Field types: EmailField, PhoneField, etc.
    - mixins.py        # TimestampMixin, StatusMixin

  # Repository pattern
  repository:
    - base.py          # BaseRepository
    - crud.py          # CRUDRepository
    - mixins.py        # StatusMixin

  # Configuration management
  config:
    - settings.py      # ApplicationSettings, get_settings
    - database.py      # DatabaseConfig
    - environment.py   # Environment detection

  # Utilities
  utils:
    - logger.py        # get_logger, logging decorators
    - datetime_utils.py # utc_now, date formatting
    - serializers.py   # JSON serialization
    - security.py      # Input sanitization

  # Exception handling
  exceptions:
    - base.py          # PortfolioBaseException, ValidationError
    - database.py      # DatabaseError, RepositoryError
    - validation.py    # SchemaValidationError

# Deployment configuration
deployment:
  strategy: copy
  target_dir: shared
  preserve_structure: true
  include_compiled: false
  exclude_patterns:
    - "*.md"
    - "*.txt"
    - "test_*"
    - "*_test.py"

# Dependencies specific to this function
dependencies:
  required:
    - fastapi
    - sqlmodel
    - asyncpg
    - pydantic[email]  # For EmailStr validation
    - aws-lambda-powertools

# Environment variables needed
environment:
  required:
    - DATABASE_URL
    - ENVIRONMENT

  optional:
    - LOG_LEVEL
    - DEBUG_MODE

# Health check configuration
health_check:
  enabled: true
  endpoint: /health
  dependencies:
    - database
    - shared_modules